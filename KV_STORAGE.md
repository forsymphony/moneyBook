# EdgeKV å­˜å‚¨è§„èŒƒæ–‡æ¡£

## å‘½åç©ºé—´

**å‘½åç©ºé—´åç§°**: `moneryNumber`

## Key å€¼è§„èŒƒ

### 1. äº¤æ˜“è®°å½• (Transactions)

#### Key æ ¼å¼
```
transactions_YYYY_MM
```

#### è¯´æ˜
- æŒ‰æœˆå­˜å‚¨äº¤æ˜“è®°å½•æ•°ç»„
- `YYYY` ä¸º4ä½å¹´ä»½ï¼Œ`MM` ä¸º2ä½æœˆä»½ï¼ˆ01-12ï¼‰
- ä¾‹å¦‚ï¼š`transactions_2024_01` è¡¨ç¤º 2024å¹´1æœˆçš„äº¤æ˜“è®°å½•

#### æ•°æ®ç»“æ„
```json
[
  {
    "id": "æ—¶é—´æˆ³+éšæœºæ•°ç”Ÿæˆçš„å”¯ä¸€ID",
    "type": "income" | "expense",
    "amount": 100.00,
    "category": "åˆ†ç±»ID",
    "date": "2024-01-15",
    "note": "å¤‡æ³¨ä¿¡æ¯ï¼ˆæœ€å¤š100å­—ç¬¦ï¼‰",
    "createdAt": "2024-01-15T10:00:00Z",
    "updatedAt": "2024-01-15T11:00:00Z"  // å¯é€‰ï¼Œæ›´æ–°æ—¶æ·»åŠ 
  }
]
```

#### ç¤ºä¾‹
```json
// transactions_2024_01
[
  {
    "id": "1705123456abc123",
    "type": "expense",
    "amount": 50.00,
    "category": "food",
    "date": "2024-01-15",
    "note": "åˆé¤",
    "createdAt": "2024-01-15T12:00:00Z"
  },
  {
    "id": "1705123457def456",
    "type": "income",
    "amount": 5000.00,
    "category": "salary",
    "date": "2024-01-01",
    "note": "å·¥èµ„",
    "createdAt": "2024-01-01T09:00:00Z"
  }
]
```

---

### 2. åˆ†ç±»é…ç½® (Categories)

#### Key æ ¼å¼
```
categories
```

#### è¯´æ˜
- å­˜å‚¨æ‰€æœ‰åˆ†ç±»é…ç½®çš„æ•°ç»„
- å…¨å±€å”¯ä¸€ï¼Œä¸æŒ‰æœˆä»½åˆ†å‰²

#### æ•°æ®ç»“æ„
```json
[
  {
    "id": "åˆ†ç±»IDï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰",
    "name": "åˆ†ç±»åç§°",
    "icon": "å›¾æ ‡ï¼ˆemojiæˆ–æ–‡å­—ï¼‰",
    "type": "income" | "expense"
  }
]
```

#### é»˜è®¤åˆ†ç±»
ç³»ç»Ÿåˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºä»¥ä¸‹é»˜è®¤åˆ†ç±»ï¼š

**æ”¯å‡ºåˆ†ç±»**:
- `food` - é¤é¥® ğŸ”
- `transport` - äº¤é€š ğŸš—
- `shopping` - è´­ç‰© ğŸ›ï¸
- `entertainment` - å¨±ä¹ ğŸ¬
- `medical` - åŒ»ç–— ğŸ¥
- `education` - æ•™è‚² ğŸ“š

**æ”¶å…¥åˆ†ç±»**:
- `salary` - å·¥èµ„ ğŸ’°
- `bonus` - å¥–é‡‘ ğŸ
- `investment` - æŠ•èµ„ ğŸ“ˆ

#### ç¤ºä¾‹
```json
// categories
[
  {
    "id": "food",
    "name": "é¤é¥®",
    "icon": "ğŸ”",
    "type": "expense"
  },
  {
    "id": "salary",
    "name": "å·¥èµ„",
    "icon": "ğŸ’°",
    "type": "income"
  },
  {
    "id": "custom_123456",
    "name": "è‡ªå®šä¹‰åˆ†ç±»",
    "icon": "ğŸ“",
    "type": "expense"
  }
]
```

---

### 3. é¢„ç®—è®¾ç½® (Budgets)

#### Key æ ¼å¼
```
budgets
```

#### è¯´æ˜
- å­˜å‚¨é¢„ç®—è®¾ç½®çš„å¯¹è±¡
- Key ä¸ºåˆ†ç±»IDï¼ŒValue ä¸ºé¢„ç®—é‡‘é¢
- åªé’ˆå¯¹æ”¯å‡ºåˆ†ç±»è®¾ç½®é¢„ç®—

#### æ•°æ®ç»“æ„
```json
{
  "åˆ†ç±»ID": é¢„ç®—é‡‘é¢ï¼ˆæ•°å­—ï¼‰,
  "åˆ†ç±»ID": é¢„ç®—é‡‘é¢ï¼ˆæ•°å­—ï¼‰
}
```

#### ç¤ºä¾‹
```json
// budgets
{
  "food": 1000.00,
  "transport": 500.00,
  "shopping": 2000.00,
  "entertainment": 800.00
}
```

---

## Key å€¼åˆ—è¡¨æ€»ç»“

| Key åç§° | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|------|
| `transactions_YYYY_MM` | Array | æŒ‰æœˆå­˜å‚¨çš„äº¤æ˜“è®°å½• | `transactions_2024_01` |
| `categories` | Array | åˆ†ç±»é…ç½®åˆ—è¡¨ | `categories` |
| `budgets` | Object | é¢„ç®—è®¾ç½® | `budgets` |

---

## æ•°æ®æ“ä½œè§„èŒƒ

### 1. äº¤æ˜“è®°å½•æ“ä½œ

#### æ·»åŠ äº¤æ˜“
- æ ¹æ®äº¤æ˜“æ—¥æœŸè‡ªåŠ¨ç¡®å®šæœˆä»½
- ç”Ÿæˆå”¯ä¸€IDå¹¶æ·»åŠ åˆ°å¯¹åº”æœˆä»½çš„æ•°ç»„ä¸­
- Key: `transactions_YYYY_MM`

#### æ›´æ–°äº¤æ˜“
- å¦‚æœæ—¥æœŸæ”¹å˜ï¼Œéœ€è¦ä»æ—§æœˆä»½åˆ é™¤ï¼Œæ·»åŠ åˆ°æ–°æœˆä»½
- æ›´æ–°å¯¹åº”æœˆä»½æ•°ç»„ä¸­çš„è®°å½•
- Key: `transactions_YYYY_MM`

#### åˆ é™¤äº¤æ˜“
- ä»å¯¹åº”æœˆä»½çš„æ•°ç»„ä¸­åˆ é™¤
- Key: `transactions_YYYY_MM`

#### æŸ¥è¯¢äº¤æ˜“
- æ ¹æ®æœˆä»½æŸ¥è¯¢å¯¹åº”Keyçš„æ•°æ®
- Key: `transactions_YYYY_MM`

### 2. åˆ†ç±»æ“ä½œ

#### æ·»åŠ åˆ†ç±»
- æ·»åŠ åˆ° `categories` æ•°ç»„
- ç”Ÿæˆå”¯ä¸€ID

#### åˆ é™¤åˆ†ç±»
- ä» `categories` æ•°ç»„ä¸­åˆ é™¤
- æ³¨æ„ï¼šåˆ é™¤åˆ†ç±»ä¸ä¼šåˆ é™¤ç›¸å…³äº¤æ˜“è®°å½•

### 3. é¢„ç®—æ“ä½œ

#### è®¾ç½®é¢„ç®—
- æ›´æ–° `budgets` å¯¹è±¡
- æ ¼å¼ï¼š`{ "åˆ†ç±»ID": é‡‘é¢ }`

#### åˆ é™¤é¢„ç®—
- ä» `budgets` å¯¹è±¡ä¸­åˆ é™¤å¯¹åº”åˆ†ç±»çš„Key

---

## å­˜å‚¨é™åˆ¶

1. **å‘½åç©ºé—´å®¹é‡**: å•ä¸ªå‘½åç©ºé—´æœ€å¤§æ”¯æŒ 1GB
2. **å•ä¸ªKeyå¤§å°**: å»ºè®®å•ä¸ªKeyçš„æ•°æ®ä¸è¶…è¿‡ 10MB
3. **æ•°æ®åŒæ­¥**: æ•°æ®ä¼šåœ¨å‡ ç§’åˆ°åå‡ ç§’å†…åŒæ­¥åˆ°å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹
4. **Keyå‘½å**: 
   - åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œè¿å­—ç¬¦
   - åŒºåˆ†å¤§å°å†™
   - å»ºè®®ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿

---

## æ³¨æ„äº‹é¡¹

1. **æœˆä»½æ ¼å¼**: å¿…é¡»ä½¿ç”¨ `YYYY_MM` æ ¼å¼ï¼ˆå¦‚ `2024_01`ï¼‰ï¼Œæœˆä»½å¿…é¡»è¡¥é›¶
2. **é‡‘é¢ç²¾åº¦**: é‡‘é¢ä¿ç•™ä¸¤ä½å°æ•°
3. **æ—¥æœŸæ ¼å¼**: ä½¿ç”¨ ISO 8601 æ ¼å¼ `YYYY-MM-DD`
4. **æ—¶é—´æˆ³æ ¼å¼**: ä½¿ç”¨ ISO 8601 æ ¼å¼ `YYYY-MM-DDTHH:mm:ssZ`
5. **å¤‡æ³¨é•¿åº¦**: å¤‡æ³¨æœ€å¤š100ä¸ªå­—ç¬¦
6. **IDç”Ÿæˆ**: ä½¿ç”¨æ—¶é—´æˆ³+éšæœºå­—ç¬¦ä¸²ç¡®ä¿å”¯ä¸€æ€§

---

## æ•°æ®è¿ç§»

å¦‚æœéœ€è¦è¿ç§»æ•°æ®ï¼š

1. **å¯¼å‡ºæ•°æ®**: é€šè¿‡ API è·å–æ‰€æœ‰æœˆä»½çš„äº¤æ˜“è®°å½•
2. **å¤‡ä»½åˆ†ç±»**: å¯¼å‡º `categories` æ•°æ®
3. **å¤‡ä»½é¢„ç®—**: å¯¼å‡º `budgets` æ•°æ®
4. **å¯¼å…¥æ•°æ®**: æŒ‰æœˆä»½é‡æ–°å†™å…¥åˆ°æ–°çš„å‘½åç©ºé—´

---

## API å¯¹åº”å…³ç³»

| API è·¯å¾„ | æ“ä½œçš„ Key | æ“ä½œç±»å‹ |
|---------|-----------|---------|
| `GET /api/transactions?month=2024-01` | `transactions_2024_01` | è¯»å– |
| `POST /api/transactions` | `transactions_YYYY_MM` | å†™å…¥ |
| `PUT /api/transactions/:id` | `transactions_YYYY_MM` | æ›´æ–° |
| `DELETE /api/transactions/:id` | `transactions_YYYY_MM` | åˆ é™¤ |
| `GET /api/categories` | `categories` | è¯»å– |
| `POST /api/categories` | `categories` | å†™å…¥ |
| `DELETE /api/categories/:id` | `categories` | åˆ é™¤ |
| `GET /api/budgets` | `budgets` | è¯»å– |
| `POST /api/budgets` | `budgets` | å†™å…¥ |
| `GET /api/stats?month=2024-01` | `transactions_2024_01`, `categories` | è¯»å– |

---

## ç‰ˆæœ¬å†å²

- **v1.0.0** (2024-01-15)
  - åˆå§‹ç‰ˆæœ¬
  - å®šä¹‰äº¤æ˜“è®°å½•ã€åˆ†ç±»ã€é¢„ç®—çš„å­˜å‚¨è§„èŒƒ

